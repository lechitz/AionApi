# ==============================
# AionAPI Development Environment
# ==============================

# --------------------------------
# General Application Settings
# --------------------------------
APP_NAME=AionApi
APP_ENV=development
APP_VERSION=0.1.0

# --------------------------------
# Observability / OTEL
# --------------------------------
# Development environment variables for OTEL and observability
# Controls sampling and local OTLP endpoint for development.
# NOTE: These are sensible defaults for local development; adjust as needed.

# Use TraceIdRatioSampler with a low sampling rate to avoid noise in dev.
OTEL_TRACES_SAMPLER=traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# Optional: enable debug logging for OTEL SDK
OTEL_LOG_LEVEL=debug

# OTLP endpoint for local collector (if running in docker network)
OTEL_EXPORTER_OTLP_ENDPOINT=otel-collector:4318
OTEL_EXPORTER_OTLP_INSECURE=true

# Service resource attributes
OTEL_RESOURCE_ATTRIBUTES=service.name=aionapi,service.environment=dev

OTEL_SERVICE_NAME=${APP_NAME}
OTEL_SERVICE_VERSION=${APP_VERSION}
OTEL_EXPORTER_HEADERS=
OTEL_EXPORTER_TIMEOUT=5s
OTEL_EXPORTER_COMPRESSION=none
OTEL_EXPORTER_INSECURE=true

# OpenTelemetry sampling (dev): use TRACEIDRATIO with a low sample rate to reduce trace volume.
# Valid options: always_on, always_off, traceidratio
# OTEL_TRACES_SAMPLER_ARG is a float between 0 and 1 representing the ratio (e.g., 0.02 = 2%)
OTEL_TRACES_SAMPLER=traceidratio
OTEL_TRACES_SAMPLER_ARG=0.02

# --------------------------------
# HTTP Server Config
# --------------------------------
HTTP_CONTEXT=/aion
HTTP_API_ROOT=/api/v1
HTTP_HOST=0.0.0.0
HTTP_PORT=5001
HTTP_READ_TIMEOUT=10s
HTTP_WRITE_TIMEOUT=10s
HTTP_READ_HEADER_TIMEOUT=5s
HTTP_IDLE_TIMEOUT=60s
HTTP_MAX_HEADER_BYTES=1048576
SHUTDOWN_TIMEOUT=5s
CONTEXT_REQUEST=2.1s

# --------------------------------
# Cookie Config
# --------------------------------
COOKIE_DOMAIN=localhost
# Set to true in production with HTTPS, false for local dev.
COOKIE_SECURE=false
COOKIE_HTTP_ONLY=true
COOKIE_SAMESITE=lax

# --------------------------------
# GraphQL Server Config
# --------------------------------
GRAPHQL_HOST=0.0.0.0
GRAPHQL_PATH=/graphql
GRAPHQL_READ_TIMEOUT=5s
GRAPHQL_WRITE_TIMEOUT=5s
GRAPHQL_READ_HEADER_TIMEOUT=5s
GRAPHQL_IDLE_TIMEOUT=60s
GRAPHQL_MAX_HEADER_BYTES=1048576

# --------------------------------
# Graph Gremlin
# --------------------------------
GRAPH_ENDPOINT=ws://gremlin:8182/gremlin
GRAPH_SOURCE=g
GRAPH_TIMEOUT=2s
GRAPH_ENABLED=true

# --------------------------------
# PostgresSQL Database Config
# --------------------------------
DB_TYPE=postgres
DB_USER=aion
DB_PASSWORD=<DB_PASSWORD>
DB_NAME=aionapi
DB_HOST=postgres
DB_PORT=5432
DB_SSL_MODE=disable
TIME_ZONE=UTC
DB_MAX_CONNECTIONS=20
DB_MAX_IDLE_CONNECTIONS=10
DB_CONN_MAX_LIFETIME=30m
DB_CONNECT_RETRY_INTERVAL=3s
DB_CONNECT_MAX_RETRIES=3

# --- Postgres Container Config ---
POSTGRES_USER=<POSTGRES_USER>
POSTGRES_PASSWORD=<POSTGRES_PASSWORD>
POSTGRES_DB=<POSTGRES_DB>

# --------------------------------
# Redis Config
# --------------------------------
CACHE_ADDR=redis-aion-dev:6379
CACHE_PASSWORD=my-cache-pass
CACHE_REPO=1
CACHE_POOL_SIZE=10
CACHE_CONNECT_TIMEOUT=5s

# --------------------------------
# JWT / Auth
# --------------------------------
# NEVER use real secrets in dev env for production!
SECRET_KEY=<SECRET_KEY>
